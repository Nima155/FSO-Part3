{"version":3,"sources":["components/Form.tsx","components/Persons.tsx","components/SearchFilter.tsx","services/persons.tsx","components/Notification.tsx","App.tsx","index.tsx"],"names":["Form","formSubmit","newName","setNewName","newNumber","setNewNumber","onSubmit","value","onChange","type","Person","ele","callback","name","number","onClick","id","Persons","persons","searchPara","callBack","filter","indexOf","map","SearchFilter","onSearchParaChange","BASE_URL","md","create","newPerson","axios","post","then","res","data","deleteData","delete","update","newData","put","getAll","get","Notification","message","theme","style","padding","border","color","backgroundColor","margin","borderRadius","App","useState","setPersons","useEffect","personService","setSearchPara","notificationMessage","setNotificationMessage","notificationColor","setNotificationColor","messageSetter","setTimeout","e","target","preventDefault","possibleIndex","findIndex","concat","catch","error","response","window","confirm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7a90f7bf.chunk.js","sourcesContent":["import { IFormType } from \"../interfaces\";\r\nexport const Form = ({\r\n\tformSubmit,\r\n\tnewName,\r\n\tsetNewName,\r\n\tnewNumber,\r\n\tsetNewNumber,\r\n}: IFormType) => {\r\n\treturn (\r\n\t\t<form onSubmit={formSubmit}>\r\n\t\t\t<div>\r\n\t\t\t\tname: {/* a controlled component */}\r\n\t\t\t\t<input value={newName} onChange={setNewName} />\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\tnumber: <input value={newNumber} onChange={setNewNumber} />{\" \"}\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<button type=\"submit\">add</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n};\r\n","import { IPersonsType } from \"../interfaces\";\r\nconst Person = ({\r\n\tele,\r\n\tcallback,\r\n}: {\r\n\tele: any;\r\n\tcallback: (id: number, name: string) => void;\r\n}) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<p>\r\n\t\t\t\t{ele.name} {ele.number}{\" \"}\r\n\t\t\t\t<button onClick={() => callback(ele.id, ele.name)}>delete</button>\r\n\t\t\t</p>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nconst Persons = ({ persons, searchPara, callBack }: IPersonsType) => {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{persons\r\n\t\t\t\t.filter((ele) => ele.name.indexOf(searchPara) !== -1)\r\n\t\t\t\t.map((ele) => (\r\n\t\t\t\t\t<Person ele={ele} key={ele.name} callback={callBack} />\r\n\t\t\t\t))}\r\n\t\t</>\r\n\t);\r\n};\r\nexport default Persons;\r\n","import { ISearchType } from \"../interfaces\";\r\nconst SearchFilter = ({ onSearchParaChange, searchPara }: ISearchType) => (\r\n\t<>\r\n\t\tfilter shown with\r\n\t\t<input onChange={onSearchParaChange} value={searchPara} />\r\n\t</>\r\n);\r\nexport default SearchFilter;\r\n","import axios from \"axios\";\r\nconst BASE_URL = \"http://localhost:3001/api/persons\";\r\nconst create = (newPerson: any) => {\r\n\t// HTTP POST request to add\r\n\treturn axios.post(BASE_URL, newPerson).then((res) => {\r\n\t\treturn res.data;\r\n\t});\r\n};\r\nconst getAll = () => {\r\n\treturn axios.get(BASE_URL).then((res) => res.data);\r\n};\r\nconst deleteData = (id: number, name: string) => {\r\n\t// HTTP delete request\r\n\treturn axios.delete(`${BASE_URL}/${id}`).then((res) => res.data);\r\n};\r\n\r\nconst update = (newData: any, id: number) => {\r\n\t// HTTP PUT request to update\r\n\treturn axios.put(`${BASE_URL}/${id}`, newData).then((res) => res.data);\r\n};\r\n\r\n// just to silence a warning\r\nconst md = { create, deleteData, update, getAll };\r\nexport default md;\r\n","const Notification = ({\r\n\tmessage,\r\n\ttheme,\r\n}: {\r\n\tmessage: string;\r\n\ttheme: string;\r\n}) => {\r\n\tif (!message) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tpadding: \"10px\",\r\n\t\t\t\tborder: `5px solid ${theme}`,\r\n\t\t\t\tcolor: `${theme}`,\r\n\t\t\t\tbackgroundColor: \"lightgray\",\r\n\t\t\t\tmargin: \"5px 0px\",\r\n\t\t\t\tborderRadius: \"5px\",\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<p>{message}</p>\r\n\t\t</div>\r\n\t);\r\n};\r\nexport default Notification;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Form as PersonForm } from \"./components/Form\";\r\nimport Persons from \"./components/Persons\";\r\nimport SearchFilter from \"./components/SearchFilter\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\nimport \"./index.css\";\r\nconst App = () => {\r\n\t// dummy data for debugging purposes\r\n\tconst [persons, setPersons]: any = useState([]);\r\n\t// initial fetching from a \"server\" after the first render.\r\n\tuseEffect(() => {\r\n\t\tpersonService.getAll().then((res) => {\r\n\t\t\tsetPersons(res);\r\n\t\t});\r\n\t}, []);\r\n\tconst [newName, setNewName] = useState(\"\");\r\n\tconst [newNumber, setNewNumber] = useState(\"\");\r\n\tconst [searchPara, setSearchPara] = useState(\"\");\r\n\tconst [notificationMessage, setNotificationMessage] = useState(\"\");\r\n\tconst [notificationColor, setNotificationColor] = useState(\"\");\r\n\tconst messageSetter = (message: string, color: string) => {\r\n\t\tsetNotificationColor(color);\r\n\t\tsetNotificationMessage(message);\r\n\t\tsetTimeout(() => setNotificationMessage(\"\"), 5000);\r\n\t};\r\n\r\n\tconst formSubmit = (e: any) => {\r\n\t\t// stop page from refreshing\r\n\t\te.preventDefault();\r\n\t\t// dont add if already present\r\n\t\tconst possibleIndex = persons.findIndex(\r\n\t\t\t(ele: { name: string }) => ele.name === newName\r\n\t\t);\r\n\t\tif (possibleIndex !== -1) {\r\n\t\t\tif (\r\n\t\t\t\twindow.confirm(\r\n\t\t\t\t\t`${newName} is already in the phonebook, replace the old number with a new one?`\r\n\t\t\t\t)\r\n\t\t\t) {\r\n\t\t\t\tpersonService\r\n\t\t\t\t\t.update(\r\n\t\t\t\t\t\t{ ...persons[possibleIndex], number: newNumber },\r\n\t\t\t\t\t\tpersons[possibleIndex].id\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\tsetPersons(\r\n\t\t\t\t\t\t\tpersons.map((ele: any) =>\r\n\t\t\t\t\t\t\t\tele.id === persons[possibleIndex].id ? res : ele\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tmessageSetter(\r\n\t\t\t\t\t\t\t`Changed ${persons[possibleIndex].name}s number`,\r\n\t\t\t\t\t\t\t\"green\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\tif (error.response.data.message) {\r\n\t\t\t\t\t\t\tmessageSetter(error.response.data.message, \"red\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tmessageSetter(\r\n\t\t\t\t\t\t\t\t`Information of ${newName} has already been removed from server`,\r\n\t\t\t\t\t\t\t\t\"red\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tsetPersons(\r\n\t\t\t\t\t\t\t\tpersons.filter(\r\n\t\t\t\t\t\t\t\t\t(ele: any) => ele.id !== persons[possibleIndex].id\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst newPerson = {\r\n\t\t\tname: newName,\r\n\t\t\tnumber: newNumber,\r\n\t\t};\r\n\r\n\t\tpersonService\r\n\t\t\t.create(newPerson)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tmessageSetter(`Added ${newPerson.name}`, \"green\");\r\n\t\t\t\tsetPersons(persons.concat(res));\r\n\t\t\t\tsetNewName(\"\");\r\n\t\t\t\tsetNewNumber(\"\");\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\t// console.log(error.response, \"in error\");\r\n\t\t\t\t// console.log(error.data, \"in error\");\r\n\t\t\t\t// console.log(error.reponse.data, \"in error\");\r\n\t\t\t\tmessageSetter(error.response.data.error, \"red\");\r\n\t\t\t});\r\n\t};\r\n\tconst deleteUser = (id: number, name: string) => {\r\n\t\tif (window.confirm(`Delete ${name}?`)) {\r\n\t\t\tpersonService\r\n\t\t\t\t.deleteData(id, name)\r\n\t\t\t\t.then(() => {\r\n\t\t\t\t\tmessageSetter(`Deleted ${name} from the database`, \"green\");\r\n\t\t\t\t})\r\n\t\t\t\t.catch(() => {\r\n\t\t\t\t\tmessageSetter(\r\n\t\t\t\t\t\t`Failed to delete ${name}, the user might already be deleted`,\r\n\t\t\t\t\t\t\"red\"\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\t\t\tsetPersons(persons.filter((ele: any) => ele.id !== id));\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<h2>Phonebook</h2>\r\n\t\t\t<Notification message={notificationMessage} theme={notificationColor} />\r\n\t\t\t<SearchFilter\r\n\t\t\t\tonSearchParaChange={(e) => setSearchPara(e.target.value)}\r\n\t\t\t\tsearchPara={searchPara}\r\n\t\t\t/>\r\n\t\t\t<h2>add a new</h2>\r\n\t\t\t<PersonForm\r\n\t\t\t\tformSubmit={formSubmit}\r\n\t\t\t\tnewNumber={newNumber}\r\n\t\t\t\tnewName={newName}\r\n\t\t\t\tsetNewNumber={(e) => setNewNumber(e.target.value)}\r\n\t\t\t\tsetNewName={(e) => setNewName(e.target.value)}\r\n\t\t\t/>\r\n\t\t\t<h2>Numbers</h2>\r\n\t\t\t<Persons\r\n\t\t\t\tsearchPara={searchPara}\r\n\t\t\t\tpersons={persons}\r\n\t\t\t\tcallBack={deleteUser}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\n"],"sourceRoot":""}